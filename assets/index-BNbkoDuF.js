var E=(j,h,i)=>new Promise((p,a)=>{var s=n=>{try{g(i.next(n))}catch(w){a(w)}},d=n=>{try{g(i.throw(n))}catch(w){a(w)}},g=n=>n.done?p(n.value):Promise.resolve(n.value).then(s,d);g((i=i.apply(j,h)).next())});import{r,u as C,a as z,b as D,j as t,m as u,A as B}from"./animation-BP6cVfhz.js";import{c as F}from"./three-CGOfjjel.js";import"./vendor-rxzC6AyD.js";(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))p(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&p(d)}).observe(document,{childList:!0,subtree:!0});function i(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function p(a){if(a.ep)return;a.ep=!0;const s=i(a);fetch(a.href,s)}})();const H={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},o=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768;function V(){const[j,h]=r.useState(!1),[i,p]=r.useState(!1),[a,s]=r.useState(null),[d,g]=r.useState([]),[n,w]=r.useState([]),[R,T]=r.useState([]),O=r.useRef(null),k=r.useRef(null),{scrollY:P}=C(),M=()=>{const e=[300,600,900,1200],l=e[Math.floor(Math.random()*e.length)];return Math.floor(Math.random()*l)},I=M(),L=r.useCallback(()=>{const e=M();k.current&&(k.current.src=`https://www.youtube.com/embed/Q1LpcdlOxRo?autoplay=1&mute=1&loop=1&playlist=Q1LpcdlOxRo&controls=0&showinfo=0&rel=0&modestbranding=1&playsinline=1&enablejsapi=1&iv_load_policy=3&disablekb=1&start=${e}&fs=0&color=white&theme=dark&wmode=transparent&origin=${window.location.origin}`)},[]);r.useEffect(()=>{const e=setInterval(L,3e5);return()=>clearInterval(e)},[L]);const A=z(P,[0,1e3],[0,-100]),_=D(A,{stiffness:100,damping:30});return r.useEffect(()=>{const e=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff","#5f27cd","#00d2d3","#ff9f43","#10ac84","#ee5a24","#ff3838","#ff6348","#ffa502","#2ed573","#1e90ff","#ff4757"],l=["glow","sparkle","pulse","float"],b=o()?15:25,m=Array.from({length:b},(f,c)=>({id:c,x:Math.random()*100,y:Math.random()*100,color:e[Math.floor(Math.random()*e.length)],size:o()?Math.random()*2+1.5:Math.random()*3+2,speed:o()?Math.random()*2+1.5:Math.random()*3+2,type:l[Math.floor(Math.random()*l.length)]}));w(m);const x=["🎵","🎶","⭐","✨","💫","🌟","🎸","🎹","🎤","🎧"],N=o()?8:12,v=Array.from({length:N},(f,c)=>({id:c+1e3,x:Math.random()*100,y:Math.random()*100,emoji:x[Math.floor(Math.random()*x.length)],size:o()?Math.random()*1.5+1:Math.random()*2+1.5,speed:o()?Math.random()*1+.5:Math.random()*1.5+.8,rotation:Math.random()*360}));T(v)},[]),r.useEffect(()=>{const e=()=>E(null,null,function*(){var b;try{const m="2840907d76d8663a220f47b01f14a5b6",x="camsup";console.log("🔍 Last.fm Debug:",{hasApiKey:!!m,username:x,envVars:Object.keys(H).filter(c=>c.includes("LASTFM"))});const N=`https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${x}&api_key=${m}&format=json&limit=10`;console.log("🌐 Fetching from:",N.replace(m,"***HIDDEN***"));const v=yield fetch(N);if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);const f=yield v.json();if(console.log("📡 Last.fm Response:",f),f.error)throw new Error(`Last.fm API Error ${f.error}: ${f.message}`);if((b=f.recenttracks)!=null&&b.track){const c=f.recenttracks.track.map(y=>{var S,$;return{title:y.name,artist:y.artist["#text"],album:y.album["#text"],artwork:y.image[2]["#text"],isNowPlaying:((S=y["@attr"])==null?void 0:S.nowplaying)==="true",timestamp:($=y.date)==null?void 0:$["#text"]}});console.log("🎵 Setting tracks:",c),s(c[0]),g(c.slice(1,6))}else console.log("⚠️ No tracks found in response")}catch(m){console.error("❌ Last.fm error:",m)}});e();const l=setInterval(e,3e4);return()=>clearInterval(l)},[]),r.useEffect(()=>{const e=setTimeout(()=>h(!0),800);return()=>clearTimeout(e)},[]),t.jsxs("div",{className:"app-container",ref:O,children:[t.jsxs("div",{className:"video-background",children:[!i&&t.jsx("div",{className:"video-loading"}),t.jsx("iframe",{ref:k,src:`https://www.youtube.com/embed/Q1LpcdlOxRo?autoplay=1&mute=1&loop=1&playlist=Q1LpcdlOxRo&controls=0&showinfo=0&rel=0&modestbranding=1&playsinline=1&enablejsapi=1&iv_load_policy=3&disablekb=1&start=${I}&fs=0&color=white&theme=dark&wmode=transparent&origin=${window.location.origin}&vq=hd1080&autohide=1&modestbranding=1&showinfo=0`,title:"Background Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:`background-video ${i?"loaded":""}`,onLoad:()=>{p(!0),setTimeout(()=>p(!0),1e3)},onError:e=>console.log("Video failed to load:",e)}),t.jsx("div",{className:"video-overlay"})]}),t.jsx("div",{className:"background-grid"}),t.jsx("div",{className:"floating-particles",children:n.map(e=>t.jsx(u.div,{className:`particle particle-${e.type}`,style:{left:`${e.x}%`,top:`${e.y}%`,color:e.color,width:`${e.size}px`,height:`${e.size}px`},animate:{y:[0,-30,0],x:[0,Math.random()*20-10,0],opacity:[.2,.9,.2],scale:[1,1.3,1]},transition:{duration:e.speed+Math.random()*3,repeat:1/0,delay:Math.random()*5,ease:"easeInOut"}},e.id))}),t.jsx("div",{className:"floating-elements",children:R.map(e=>t.jsx(u.div,{className:"floating-element",style:{left:`${e.x}%`,top:`${e.y}%`,fontSize:`${e.size}rem`,transform:`rotate(${e.rotation}deg)`},animate:{y:[0,-40,0],x:[0,Math.random()*30-15,0],rotate:[e.rotation,e.rotation+360],opacity:[.3,.8,.3],scale:[1,1.2,1]},transition:{duration:e.speed+Math.random()*4,repeat:1/0,delay:Math.random()*6,ease:"easeInOut"},children:e.emoji},e.id))}),t.jsx(B,{children:j&&t.jsxs(u.div,{className:"main-content",style:{y:o()?0:_},initial:{opacity:0,scale:.95,y:o()?20:0},animate:{opacity:1,scale:1,y:0},transition:{duration:1,ease:[.25,.46,.45,.94]},children:[t.jsx(u.h1,{className:"title",whileHover:{scale:o()?1.01:1.02,textShadow:"0 0 20px rgba(255,255,255,0.3)"},whileTap:{scale:.98},initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.8},children:"CAM"}),a?t.jsx(u.div,{className:"music-widget",initial:{opacity:0,y:30,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{delay:.6,duration:.8,ease:[.25,.46,.45,.94]},whileHover:{scale:o()?1.02:1.05,y:o()?0:-5},whileTap:{scale:.98},children:t.jsxs("div",{className:"track-info",children:[a.artwork&&t.jsxs("div",{className:"artwork",children:[t.jsx("img",{src:a.artwork,alt:a.album}),a.isNowPlaying&&t.jsx("div",{className:"playing-indicator",children:t.jsx("div",{className:"pulse-dot"})})]}),t.jsxs("div",{className:"track-details",children:[t.jsx("div",{className:"track-name",children:a.title}),t.jsx("div",{className:"track-artist",children:a.artist}),t.jsx("div",{className:"track-album",children:a.album})]})]})}):t.jsx(u.div,{className:"music-widget",initial:{opacity:0,y:30,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{delay:.6,duration:.8,ease:[.25,.46,.45,.94]},whileHover:{scale:o()?1.02:1.05,y:o()?0:-5},whileTap:{scale:.98},children:t.jsxs("div",{className:"track-info",children:[t.jsx("div",{className:"artwork",children:t.jsx("div",{style:{width:"100%",height:"100%",background:"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},children:"🎵"})}),t.jsxs("div",{className:"track-details",children:[t.jsx("div",{className:"track-name",children:"Last.fm Not Connected"}),t.jsx("div",{className:"track-artist",children:"Add your API key to .env"}),t.jsx("div",{className:"track-album",children:"Check setup-lastfm.md"})]})]})}),d.length>0&&t.jsxs(u.div,{className:"recent-tracks-flowing",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.8,ease:[.25,.46,.45,.94]},children:[t.jsx("div",{className:"recent-tracks-label",children:"Recently Played"}),t.jsx("div",{className:"recent-tracks-flow",children:d.map((e,l)=>t.jsxs(u.div,{className:"recent-track-flow-item",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.9+l*.15,duration:.6,ease:[.25,.46,.45,.94]},whileHover:{scale:1.05,y:-2},children:[t.jsx("div",{className:"recent-track-flow-artwork",children:e.artwork?t.jsx("img",{src:e.artwork,alt:e.album}):t.jsx("div",{className:"recent-track-flow-placeholder",children:"🎵"})}),t.jsxs("div",{className:"recent-track-flow-info",children:[t.jsx("div",{className:"recent-track-flow-name",children:e.title}),t.jsx("div",{className:"recent-track-flow-artist",children:e.artist})]})]},`${e.title}-${e.artist}-${l}`))})]})]})})]})}F.createRoot(document.getElementById("root")).render(t.jsx(r.StrictMode,{children:t.jsx(V,{})}));
