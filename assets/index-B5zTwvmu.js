var R=(v,m,o)=>new Promise((f,a)=>{var s=n=>{try{y(o.next(n))}catch(w){a(w)}},l=n=>{try{y(o.throw(n))}catch(w){a(w)}},y=n=>n.done?f(n.value):Promise.resolve(n.value).then(s,l);y((o=o.apply(v,m)).next())});import{r,u as I,a as _,b as C,j as e,m as u,A as D}from"./animation-BP6cVfhz.js";import{c as B}from"./three-CGOfjjel.js";import"./vendor-rxzC6AyD.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))f(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&f(l)}).observe(document,{childList:!0,subtree:!0});function o(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function f(a){if(a.ep)return;a.ep=!0;const s=o(a);fetch(a.href,s)}})();const H={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},i=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768;function V(){const[v,m]=r.useState(!1),[o,f]=r.useState(!1),[a,s]=r.useState(null),[l,y]=r.useState([]),[n,w]=r.useState([]),T=r.useRef(null),b=r.useRef(null),{scrollY:$}=I(),M=()=>{const t=[300,600,900,1200],c=t[Math.floor(Math.random()*t.length)];return Math.floor(Math.random()*c)},P=M(),L=r.useCallback(()=>{const t=M();b.current&&(b.current.src=`https://www.youtube.com/embed/Q1LpcdlOxRo?autoplay=1&mute=1&loop=1&playlist=Q1LpcdlOxRo&controls=0&showinfo=0&rel=0&modestbranding=1&playsinline=1&enablejsapi=1&iv_load_policy=3&disablekb=1&start=${t}&fs=0&color=white&theme=dark&wmode=transparent&origin=${window.location.origin}`)},[]);r.useEffect(()=>{const t=setInterval(L,3e5);return()=>clearInterval(t)},[L]);const O=_($,[0,1e3],[0,-100]),A=C(O,{stiffness:100,damping:30});return r.useEffect(()=>{const t=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff","#5f27cd","#00d2d3","#ff9f43","#10ac84","#ee5a24","#ff3838","#ff6348","#ffa502","#2ed573","#1e90ff","#ff4757"],c=["glow","sparkle","pulse","float"],x=i()?15:25,d=Array.from({length:x},(N,j)=>({id:j,x:Math.random()*100,y:Math.random()*100,color:t[Math.floor(Math.random()*t.length)],size:i()?Math.random()*2+1.5:Math.random()*3+2,speed:i()?Math.random()*2+1.5:Math.random()*3+2,type:c[Math.floor(Math.random()*c.length)]}));w(d)},[]),r.useEffect(()=>{const t=()=>R(null,null,function*(){var x;try{const d="2840907d76d8663a220f47b01f14a5b6",N="camsup";console.log("ðŸ” Last.fm Debug:",{hasApiKey:!!d,username:N,envVars:Object.keys(H).filter(g=>g.includes("LASTFM"))});const j=`https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${N}&api_key=${d}&format=json&limit=10`;console.log("ðŸŒ Fetching from:",j.replace(d,"***HIDDEN***"));const k=yield fetch(j);if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);const p=yield k.json();if(console.log("ðŸ“¡ Last.fm Response:",p),p.error)throw new Error(`Last.fm API Error ${p.error}: ${p.message}`);if((x=p.recenttracks)!=null&&x.track){const g=p.recenttracks.track.map(h=>{var S,E;return{title:h.name,artist:h.artist["#text"],album:h.album["#text"],artwork:h.image[2]["#text"],isNowPlaying:((S=h["@attr"])==null?void 0:S.nowplaying)==="true",timestamp:(E=h.date)==null?void 0:E["#text"]}});console.log("ðŸŽµ Setting tracks:",g),s(g[0]),y(g.slice(1,6))}else console.log("âš ï¸ No tracks found in response")}catch(d){console.error("âŒ Last.fm error:",d)}});t();const c=setInterval(t,3e4);return()=>clearInterval(c)},[]),r.useEffect(()=>{const t=setTimeout(()=>m(!0),800);return()=>clearTimeout(t)},[]),e.jsxs("div",{className:"app-container",ref:T,children:[e.jsxs("div",{className:"video-background",children:[!o&&e.jsx("div",{className:"video-loading"}),e.jsx("iframe",{ref:b,src:`https://www.youtube.com/embed/Q1LpcdlOxRo?autoplay=1&mute=1&loop=1&playlist=Q1LpcdlOxRo&controls=0&showinfo=0&rel=0&modestbranding=1&playsinline=1&enablejsapi=1&iv_load_policy=3&disablekb=1&start=${P}&fs=0&color=white&theme=dark&wmode=transparent&origin=${window.location.origin}&vq=hd1080&autohide=1&modestbranding=1&showinfo=0`,title:"Background Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:`background-video ${o?"loaded":""}`,onLoad:()=>{f(!0),setTimeout(()=>f(!0),1e3)},onError:t=>console.log("Video failed to load:",t)}),e.jsx("div",{className:"video-overlay"})]}),e.jsx("div",{className:"background-grid"}),e.jsx("div",{className:"floating-particles",children:n.map(t=>e.jsx(u.div,{className:`particle particle-${t.type}`,style:{left:`${t.x}%`,top:`${t.y}%`,color:t.color,width:`${t.size}px`,height:`${t.size}px`},animate:{y:[0,-30,0],x:[0,Math.random()*20-10,0],opacity:[.2,.9,.2],scale:[1,1.3,1]},transition:{duration:t.speed+Math.random()*3,repeat:1/0,delay:Math.random()*5,ease:"easeInOut"}},t.id))}),e.jsx(D,{children:v&&e.jsxs(u.div,{className:"main-content",style:{y:i()?0:A},initial:{opacity:0,scale:.95,y:i()?20:0},animate:{opacity:1,scale:1,y:0},transition:{duration:1,ease:[.25,.46,.45,.94]},children:[e.jsx(u.h1,{className:"title",whileHover:{scale:i()?1.01:1.02,textShadow:"0 0 20px rgba(255,255,255,0.3)"},whileTap:{scale:.98},initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.8},children:"CAM"}),a?e.jsx(u.div,{className:"music-widget",initial:{opacity:0,y:30,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{delay:.6,duration:.8,ease:[.25,.46,.45,.94]},whileHover:{scale:i()?1.02:1.05,y:i()?0:-5},whileTap:{scale:.98},children:e.jsxs("div",{className:"track-info",children:[a.artwork&&e.jsxs("div",{className:"artwork",children:[e.jsx("img",{src:a.artwork,alt:a.album}),a.isNowPlaying&&e.jsx("div",{className:"playing-indicator",children:e.jsx("div",{className:"pulse-dot"})})]}),e.jsxs("div",{className:"track-details",children:[e.jsx("div",{className:"track-name",children:a.title}),e.jsx("div",{className:"track-artist",children:a.artist}),e.jsx("div",{className:"track-album",children:a.album})]})]})}):e.jsx(u.div,{className:"music-widget",initial:{opacity:0,y:30,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{delay:.6,duration:.8,ease:[.25,.46,.45,.94]},whileHover:{scale:i()?1.02:1.05,y:i()?0:-5},whileTap:{scale:.98},children:e.jsxs("div",{className:"track-info",children:[e.jsx("div",{className:"artwork",children:e.jsx("div",{style:{width:"100%",height:"100%",background:"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},children:"ðŸŽµ"})}),e.jsxs("div",{className:"track-details",children:[e.jsx("div",{className:"track-name",children:"Last.fm Not Connected"}),e.jsx("div",{className:"track-artist",children:"Add your API key to .env"}),e.jsx("div",{className:"track-album",children:"Check setup-lastfm.md"})]})]})}),l.length>0&&e.jsxs(u.div,{className:"recent-tracks-flowing",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.8,ease:[.25,.46,.45,.94]},children:[e.jsx("div",{className:"recent-tracks-label",children:"Recently Played"}),e.jsx("div",{className:"recent-tracks-flow",children:l.map((t,c)=>e.jsxs(u.div,{className:"recent-track-flow-item",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.9+c*.15,duration:.6,ease:[.25,.46,.45,.94]},whileHover:{scale:1.05,y:-2},children:[e.jsx("div",{className:"recent-track-flow-artwork",children:t.artwork?e.jsx("img",{src:t.artwork,alt:t.album}):e.jsx("div",{className:"recent-track-flow-placeholder",children:"ðŸŽµ"})}),e.jsxs("div",{className:"recent-track-flow-info",children:[e.jsx("div",{className:"recent-track-flow-name",children:t.title}),e.jsx("div",{className:"recent-track-flow-artist",children:t.artist})]})]},`${t.title}-${t.artist}-${c}`))})]})]})})]})}B.createRoot(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(V,{})}));
