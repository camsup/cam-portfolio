var $=(h,o,n)=>new Promise((s,a)=>{var r=l=>{try{g(n.next(l))}catch(x){a(x)}},d=l=>{try{g(n.throw(l))}catch(x){a(x)}},g=l=>l.done?s(l.value):Promise.resolve(l.value).then(r,d);g((n=n.apply(h,o)).next())});import{r as i,u as I,a as _,b as D,j as e,m as f,A as C}from"./animation-BP6cVfhz.js";import{c as B}from"./three-CGOfjjel.js";import"./vendor-rxzC6AyD.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();const H={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},c=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768,V=h=>{const o=new Date(h),s=Math.floor((new Date().getTime()-o.getTime())/1e3);return s<60?"just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:s<2592e3?`${Math.floor(s/86400)}d ago`:o.toLocaleDateString()};function z(){const[h,o]=i.useState(!1),[n,s]=i.useState(!1),[a,r]=i.useState(null),[d,g]=i.useState([]),[l,x]=i.useState([]),E=i.useRef(null),b=i.useRef(null),{scrollY:R}=I(),k=()=>{const t=[300,600,900,1200],m=t[Math.floor(Math.random()*t.length)];return Math.floor(Math.random()*m)},P=k(),M=i.useCallback(()=>{const t=k();b.current&&(b.current.src=`https://www.youtube.com/embed/Q1LpcdlOxRo?autoplay=1&mute=1&loop=1&playlist=Q1LpcdlOxRo&controls=0&showinfo=0&rel=0&modestbranding=1&playsinline=1&enablejsapi=1&iv_load_policy=3&disablekb=1&start=${t}&fs=0&color=white&theme=dark&wmode=transparent&origin=${window.location.origin}`)},[]);i.useEffect(()=>{const t=setInterval(M,3e5);return()=>clearInterval(t)},[M]);const O=_(R,[0,1e3],[0,-100]),A=D(O,{stiffness:100,damping:30});return i.useEffect(()=>{const t=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff","#5f27cd","#00d2d3","#ff9f43","#10ac84","#ee5a24","#ff3838","#ff6348","#ffa502","#2ed573","#1e90ff","#ff4757"],m=c()?12:20,w=Array.from({length:m},(u,j)=>({id:j,x:Math.random()*100,y:Math.random()*100,color:t[Math.floor(Math.random()*t.length)],size:c()?Math.random()*2+1.5:Math.random()*3+2,speed:c()?Math.random()*2+1.5:Math.random()*3+2}));x(w)},[]),i.useEffect(()=>{const t=()=>$(null,null,function*(){var w;try{const u="2840907d76d8663a220f47b01f14a5b6",j="camsup";console.log("ðŸ” Last.fm Debug:",{hasApiKey:!!u,username:j,envVars:Object.keys(H).filter(v=>v.includes("LASTFM"))});const L=`https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${j}&api_key=${u}&format=json&limit=10`;console.log("ðŸŒ Fetching from:",L.replace(u,"***HIDDEN***"));const N=yield fetch(L);if(!N.ok)throw new Error(`HTTP error! status: ${N.status}`);const p=yield N.json();if(console.log("ðŸ“¡ Last.fm Response:",p),p.error)throw new Error(`Last.fm API Error ${p.error}: ${p.message}`);if((w=p.recenttracks)!=null&&w.track){const v=p.recenttracks.track.map(y=>{var S,T;return{title:y.name,artist:y.artist["#text"],album:y.album["#text"],artwork:y.image[2]["#text"],isNowPlaying:((S=y["@attr"])==null?void 0:S.nowplaying)==="true",timestamp:(T=y.date)==null?void 0:T["#text"]}});console.log("ðŸŽµ Setting tracks:",v),r(v[0]),g(v.slice(1,6))}else console.log("âš ï¸ No tracks found in response")}catch(u){console.error("âŒ Last.fm error:",u)}});t();const m=setInterval(t,3e4);return()=>clearInterval(m)},[]),i.useEffect(()=>{const t=setTimeout(()=>o(!0),800);return()=>clearTimeout(t)},[]),e.jsxs("div",{className:"app-container",ref:E,children:[e.jsxs("div",{className:"video-background",children:[!n&&e.jsx("div",{className:"video-loading"}),e.jsx("iframe",{ref:b,src:`https://www.youtube.com/embed/Q1LpcdlOxRo?autoplay=1&mute=1&loop=1&playlist=Q1LpcdlOxRo&controls=0&showinfo=0&rel=0&modestbranding=1&playsinline=1&enablejsapi=1&iv_load_policy=3&disablekb=1&start=${P}&fs=0&color=white&theme=dark&wmode=transparent&origin=${window.location.origin}&vq=hd1080&autohide=1&modestbranding=1&showinfo=0`,title:"Background Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:`background-video ${n?"loaded":""}`,onLoad:()=>{s(!0),setTimeout(()=>s(!0),1e3)},onError:t=>console.log("Video failed to load:",t)}),e.jsx("div",{className:"video-overlay"})]}),e.jsx("div",{className:"background-grid"}),e.jsx("div",{className:"floating-particles",children:l.map(t=>e.jsx(f.div,{className:"particle",style:{left:`${t.x}%`,top:`${t.y}%`,color:t.color,width:`${t.size}px`,height:`${t.size}px`},animate:{y:[0,-30,0],x:[0,Math.random()*20-10,0],opacity:[.2,.9,.2],scale:[1,1.3,1]},transition:{duration:t.speed+Math.random()*3,repeat:1/0,delay:Math.random()*5,ease:"easeInOut"}},t.id))}),e.jsx(C,{children:h&&e.jsxs(f.div,{className:"main-content",style:{y:c()?0:A},initial:{opacity:0,scale:.95,y:c()?20:0},animate:{opacity:1,scale:1,y:0},transition:{duration:1,ease:[.25,.46,.45,.94]},children:[e.jsx(f.h1,{className:"title",whileHover:{scale:c()?1.01:1.02,textShadow:"0 0 20px rgba(255,255,255,0.3)"},whileTap:{scale:.98},initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.8},children:"CAM"}),a?e.jsx(f.div,{className:"music-widget",initial:{opacity:0,y:30,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{delay:.6,duration:.8,ease:[.25,.46,.45,.94]},whileHover:{scale:c()?1.02:1.05,y:c()?0:-5},whileTap:{scale:.98},children:e.jsxs("div",{className:"track-info",children:[a.artwork&&e.jsxs("div",{className:"artwork",children:[e.jsx("img",{src:a.artwork,alt:a.album}),a.isNowPlaying&&e.jsx("div",{className:"playing-indicator",children:e.jsx("div",{className:"pulse-dot"})})]}),e.jsxs("div",{className:"track-details",children:[e.jsx("div",{className:"track-name",children:a.title}),e.jsx("div",{className:"track-artist",children:a.artist}),e.jsx("div",{className:"track-album",children:a.album})]})]})}):e.jsx(f.div,{className:"music-widget",initial:{opacity:0,y:30,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{delay:.6,duration:.8,ease:[.25,.46,.45,.94]},whileHover:{scale:c()?1.02:1.05,y:c()?0:-5},whileTap:{scale:.98},children:e.jsxs("div",{className:"track-info",children:[e.jsx("div",{className:"artwork",children:e.jsx("div",{style:{width:"100%",height:"100%",background:"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},children:"ðŸŽµ"})}),e.jsxs("div",{className:"track-details",children:[e.jsx("div",{className:"track-name",children:"Last.fm Not Connected"}),e.jsx("div",{className:"track-artist",children:"Add your API key to .env"}),e.jsx("div",{className:"track-album",children:"Check setup-lastfm.md"})]})]})}),d.length>0&&e.jsxs(f.div,{className:"recent-tracks-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.8,ease:[.25,.46,.45,.94]},children:[e.jsx("div",{className:"recent-tracks-header",children:e.jsx("span",{className:"recent-tracks-title",children:"Recently Played"})}),e.jsx("div",{className:"recent-tracks-list",children:d.map((t,m)=>e.jsxs(f.div,{className:"recent-track-item",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9+m*.1,duration:.6,ease:[.25,.46,.45,.94]},whileHover:{scale:1.02,x:5},children:[e.jsx("div",{className:"recent-track-artwork",children:t.artwork?e.jsx("img",{src:t.artwork,alt:t.album}):e.jsx("div",{className:"recent-track-placeholder",children:"ðŸŽµ"})}),e.jsxs("div",{className:"recent-track-info",children:[e.jsx("div",{className:"recent-track-name",children:t.title}),e.jsx("div",{className:"recent-track-artist",children:t.artist})]}),e.jsx("div",{className:"recent-track-time",children:t.timestamp&&e.jsx("span",{className:"time-ago",children:V(t.timestamp)})})]},`${t.title}-${t.artist}-${m}`))})]})]})})]})}B.createRoot(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(z,{})}));
