var E=(w,c,i)=>new Promise((l,t)=>{var s=n=>{try{h(i.next(n))}catch(m){t(m)}},d=n=>{try{h(i.throw(n))}catch(m){t(m)}},h=n=>n.done?l(n.value):Promise.resolve(n.value).then(s,d);h((i=i.apply(w,c)).next())});import{r,u as A,a as I,b as _,j as e,m as g,A as $}from"./animation-BP6cVfhz.js";import{c as C}from"./three-CGOfjjel.js";import"./vendor-rxzC6AyD.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}})();const D={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},o=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768;function B(){const[w,c]=r.useState(!1),[i,l]=r.useState(!1),[t,s]=r.useState(null),[d,h]=r.useState([]),n=r.useRef(null),m=r.useRef(null),{scrollY:O}=A(),k=()=>{const a=[300,600,900,1200],y=a[Math.floor(Math.random()*a.length)];return Math.floor(Math.random()*y)},P=k(),N=r.useCallback(()=>{const a=k();m.current&&(m.current.src=`https://www.youtube.com/embed/Q1LpcdlOxRo?autoplay=1&mute=1&loop=1&playlist=Q1LpcdlOxRo&controls=0&showinfo=0&rel=0&modestbranding=1&playsinline=1&enablejsapi=1&iv_load_policy=3&disablekb=1&start=${a}&fs=0&color=white&theme=dark&wmode=transparent&origin=${window.location.origin}`)},[]);r.useEffect(()=>{const a=setInterval(N,3e5);return()=>clearInterval(a)},[N]);const R=I(O,[0,1e3],[0,-100]),T=_(R,{stiffness:100,damping:30});return r.useEffect(()=>{const a=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff","#5f27cd","#00d2d3","#ff9f43","#10ac84","#ee5a24","#ff3838","#ff6348","#ffa502","#2ed573","#1e90ff","#ff4757"],y=o()?12:20,v=Array.from({length:y},(b,x)=>({id:x,x:Math.random()*100,y:Math.random()*100,color:a[Math.floor(Math.random()*a.length)],size:o()?Math.random()*2+1.5:Math.random()*3+2,speed:o()?Math.random()*2+1.5:Math.random()*3+2}));h(v)},[]),r.useEffect(()=>{const a=()=>E(null,null,function*(){var v,b,x;try{const f="2840907d76d8663a220f47b01f14a5b6",L="camsup";console.log("ðŸ” Last.fm Debug:",{hasApiKey:!!f,username:L,envVars:Object.keys(D).filter(u=>u.includes("LASTFM"))});const M=`https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${L}&api_key=${f}&format=json&limit=1`;console.log("ðŸŒ Fetching from:",M.replace(f,"***HIDDEN***"));const j=yield fetch(M);if(!j.ok)throw new Error(`HTTP error! status: ${j.status}`);const p=yield j.json();if(console.log("ðŸ“¡ Last.fm Response:",p),p.error)throw new Error(`Last.fm API Error ${p.error}: ${p.message}`);if((b=(v=p.recenttracks)==null?void 0:v.track)!=null&&b[0]){const u=p.recenttracks.track[0],S={title:u.name,artist:u.artist["#text"],album:u.album["#text"],artwork:u.image[2]["#text"],isNowPlaying:((x=u["@attr"])==null?void 0:x.nowplaying)==="true"};console.log("ðŸŽµ Setting track:",S),s(S)}else console.log("âš ï¸ No tracks found in response")}catch(f){console.error("âŒ Last.fm error:",f)}});a();const y=setInterval(a,3e4);return()=>clearInterval(y)},[]),r.useEffect(()=>{const a=setTimeout(()=>c(!0),800);return()=>clearTimeout(a)},[]),e.jsxs("div",{className:"app-container",ref:n,children:[e.jsxs("div",{className:"video-background",children:[!i&&e.jsx("div",{className:"video-loading"}),e.jsx("iframe",{ref:m,src:`https://www.youtube.com/embed/Q1LpcdlOxRo?autoplay=1&mute=1&loop=1&playlist=Q1LpcdlOxRo&controls=0&showinfo=0&rel=0&modestbranding=1&playsinline=1&enablejsapi=1&iv_load_policy=3&disablekb=1&start=${P}&fs=0&color=white&theme=dark&wmode=transparent&origin=${window.location.origin}&vq=hd1080&autohide=1&modestbranding=1&showinfo=0`,title:"Background Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:`background-video ${i?"loaded":""}`,onLoad:()=>{l(!0),setTimeout(()=>l(!0),1e3)},onError:a=>console.log("Video failed to load:",a)}),e.jsx("div",{className:"video-overlay"})]}),e.jsx("div",{className:"background-grid"}),e.jsx("div",{className:"floating-particles",children:d.map(a=>e.jsx(g.div,{className:"particle",style:{left:`${a.x}%`,top:`${a.y}%`,color:a.color,width:`${a.size}px`,height:`${a.size}px`},animate:{y:[0,-30,0],x:[0,Math.random()*20-10,0],opacity:[.2,.9,.2],scale:[1,1.3,1]},transition:{duration:a.speed+Math.random()*3,repeat:1/0,delay:Math.random()*5,ease:"easeInOut"}},a.id))}),e.jsx($,{children:w&&e.jsxs(g.div,{className:"main-content",style:{y:o()?0:T},initial:{opacity:0,scale:.95,y:o()?20:0},animate:{opacity:1,scale:1,y:0},transition:{duration:1,ease:[.25,.46,.45,.94]},children:[e.jsx(g.h1,{className:"title",whileHover:{scale:o()?1.01:1.02,textShadow:"0 0 20px rgba(255,255,255,0.3)"},whileTap:{scale:.98},initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.8},children:"CAM"}),t?e.jsx(g.div,{className:"music-widget",initial:{opacity:0,y:30,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{delay:.6,duration:.8,ease:[.25,.46,.45,.94]},whileHover:{scale:o()?1.02:1.05,y:o()?0:-5},whileTap:{scale:.98},children:e.jsxs("div",{className:"track-info",children:[t.artwork&&e.jsxs("div",{className:"artwork",children:[e.jsx("img",{src:t.artwork,alt:t.album}),t.isNowPlaying&&e.jsx("div",{className:"playing-indicator",children:e.jsx("div",{className:"pulse-dot"})})]}),e.jsxs("div",{className:"track-details",children:[e.jsx("div",{className:"track-name",children:t.title}),e.jsx("div",{className:"track-artist",children:t.artist}),e.jsx("div",{className:"track-album",children:t.album})]})]})}):e.jsx(g.div,{className:"music-widget",initial:{opacity:0,y:30,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{delay:.6,duration:.8,ease:[.25,.46,.45,.94]},whileHover:{scale:o()?1.02:1.05,y:o()?0:-5},whileTap:{scale:.98},children:e.jsxs("div",{className:"track-info",children:[e.jsx("div",{className:"artwork",children:e.jsx("div",{style:{width:"100%",height:"100%",background:"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},children:"ðŸŽµ"})}),e.jsxs("div",{className:"track-details",children:[e.jsx("div",{className:"track-name",children:"Last.fm Not Connected"}),e.jsx("div",{className:"track-artist",children:"Add your API key to .env"}),e.jsx("div",{className:"track-album",children:"Check setup-lastfm.md"})]})]})})]})})]})}C.createRoot(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(B,{})}));
